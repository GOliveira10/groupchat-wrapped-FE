{"ast":null,"code":"var _jsxFileName = \"/Users/momos/git/whatsapp-analyzer/frontend/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport html2canvas from 'html2canvas';\nimport { Camera, Copy } from 'lucide-react';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport { Bar, Line } from 'react-chartjs-2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, BarElement, Title, Tooltip, Legend);\nconst analysisApiUrl = process.env.ANALYSIS_API_URL;\n\n// ScrollIndicator component\nconst ScrollIndicator = ({\n  showIndicator\n}) => {\n  if (!showIndicator) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed right-12 top-1/2 -translate-y-1/2 flex flex-col items-center animate-fade-in\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"animate-bounce flex flex-col items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        width: \"24\",\n        height: \"24\",\n        viewBox: \"0 0 24 24\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        strokeWidth: \"2\",\n        strokeLinecap: \"round\",\n        strokeLinejoin: \"round\",\n        className: \"text-blue-500\",\n        children: [/*#__PURE__*/_jsxDEV(\"line\", {\n          x1: \"12\",\n          y1: \"5\",\n          x2: \"12\",\n          y2: \"19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n          points: \"19 12 12 19 5 12\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm font-medium text-gray-500 mt-2\",\n        children: \"Scroll Down\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n};\n\n// Whataspp connector\n_c = ScrollIndicator;\nconst WhatsAppConnector = ({\n  onChatSelected\n}) => {\n  _s();\n  const [sessionId, setSessionId] = useState(null);\n  const [qrCode, setQrCode] = useState(null);\n  const [status, setStatus] = useState('idle');\n  const [error, setError] = useState(null);\n  const initializeConnection = async () => {\n    console.log('Initializing WhatsApp connection...');\n    try {\n      setStatus('connecting');\n      const response = await fetch('http://localhost:3001/connect-whatsapp', {\n        method: 'POST'\n      });\n      if (!response.ok) throw new Error('Failed to connect to WhatsApp');\n      const data = await response.json();\n      console.log('WhatsApp connect response:', data);\n      if (data.qrCode && data.sessionId) {\n        setQrCode(data.qrCode);\n        setSessionId(data.sessionId);\n        setStatus('awaiting_scan');\n      } else {\n        throw new Error('No QR code or sessionId returned');\n      }\n    } catch (error) {\n      console.error('WhatsApp connect error:', error);\n      setError(error.message);\n      setStatus('error');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-4\",\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-red-50 text-red-700 rounded-lg\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this), qrCode ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: `data:image/png;base64,${qrCode}`,\n        alt: \"WhatsApp QR Code\",\n        className: \"mx-auto mb-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-600\",\n        children: \"Scan this QR code with WhatsApp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: initializeConnection,\n      disabled: status === 'connecting',\n      className: \"w-full px-4 py-3 bg-green-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-700 transition-colors\",\n      children: status === 'connecting' ? 'Connecting...' : 'Connect to WhatsApp'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n\n// Helper functions\n_s(WhatsAppConnector, \"/+kjVcTtJD5/JnKRoWiucLsDlhA=\");\n_c2 = WhatsAppConnector;\nconst isValidArray = arr => Array.isArray(arr) && arr.length > 0;\nconst safeGet = (obj, path, defaultValue = '') => {\n  try {\n    var _path$split$reduce;\n    return (_path$split$reduce = path.split('.').reduce((acc, part) => acc === null || acc === void 0 ? void 0 : acc[part], obj)) !== null && _path$split$reduce !== void 0 ? _path$split$reduce : defaultValue;\n  } catch {\n    return defaultValue;\n  }\n};\nconst sortBarData = (labels, data) => {\n  if (!isValidArray(labels) || !isValidArray(data) || labels.length !== data.length) {\n    return {\n      sortedLabels: labels || [],\n      sortedData: data || []\n    };\n  }\n  const pairs = labels.map((label, i) => [label, data[i]]);\n  pairs.sort((a, b) => b[1] - a[1]);\n  return {\n    sortedLabels: pairs.map(pair => pair[0]),\n    sortedData: pairs.map(pair => pair[1])\n  };\n};\nconst getRandomColor = () => {\n  const r = Math.floor(Math.random() * 255);\n  const g = Math.floor(Math.random() * 255);\n  const b = Math.floor(Math.random() * 255);\n  return `rgba(${r}, ${g}, ${b}, 0.6)`;\n};\nconst generateDistinctColors = count => {\n  const hueStep = 360 / count;\n  return Array.from({\n    length: count\n  }, (_, i) => {\n    const hue = i * hueStep;\n    return `hsla(${hue}, 70%, 60%, 0.6)`;\n  });\n};\nconst wrapText = (ctx, text, x, y, maxWidth, lineHeight) => {\n  console.log('Wrapping text:', text); // Debug the input text\n  const words = text.split(' ');\n  let line = '';\n  const lines = [];\n\n  // Break text into multiple lines\n  for (const word of words) {\n    const testLine = line + word + ' ';\n    const metrics = ctx.measureText(testLine);\n    const testWidth = metrics.width;\n    if (testWidth > maxWidth && line !== '') {\n      console.log('Line exceeds maxWidth:', line); // Debug each wrapped line\n      lines.push(line.trim());\n      line = word + ' ';\n    } else {\n      line = testLine;\n    }\n  }\n  lines.push(line.trim()); // Add the last line\n  console.log('Final wrapped lines:', lines); // Debug the final lines array\n\n  // Draw each line of text\n  lines.forEach((line, index) => {\n    console.log('Drawing line:', line, 'at y:', y + index * lineHeight); // Debug the position of each line\n    ctx.fillText(line, x, y + index * lineHeight);\n  });\n};\nconst groupBySender = (data, dateField = 'date', valueField = 'message_count') => {\n  if (!isValidArray(data)) return {\n    dates: [],\n    datasets: []\n  };\n  try {\n    const senders = [...new Set(data.map(d => safeGet(d, 'sender')))].filter(Boolean);\n    const dates = [...new Set(data.map(d => safeGet(d, dateField)))].filter(Boolean).sort();\n    const colors = generateDistinctColors(senders.length);\n    const datasets = senders.map((sender, index) => {\n      const senderData = data.filter(d => safeGet(d, 'sender') === sender);\n      const values = dates.map(dt => {\n        const entry = senderData.find(x => safeGet(x, dateField) === dt);\n        return safeGet(entry, valueField, 0);\n      });\n      const color = colors[index];\n      return {\n        label: sender,\n        data: values,\n        borderColor: color,\n        backgroundColor: color,\n        fill: true\n      };\n    });\n    return {\n      dates,\n      datasets\n    };\n  } catch (error) {\n    console.error('Error in groupBySender:', error);\n    return {\n      dates: [],\n      datasets: []\n    };\n  }\n};\nconst downloadCanvas = (canvas, filename) => {\n  const link = document.createElement('a');\n  link.download = `${filename}.png`;\n  link.href = canvas.toDataURL('image/png');\n  link.click();\n};\nconst handleExport = async (elementId, type) => {\n  const element = document.getElementById(elementId);\n  if (!element) return;\n  try {\n    // Wait for fonts to load\n    await document.fonts.ready;\n    await new Promise(resolve => setTimeout(resolve, 100));\n\n    // Check if this is a chart (has canvas element)\n    const isChart = element.querySelector('canvas') !== null;\n    if (isChart) {\n      const chartCanvas = element.querySelector('canvas');\n      const containerWidth = element.offsetWidth;\n      const containerHeight = element.offsetHeight;\n\n      // Create a new canvas with scaled dimensions\n      const exportCanvas = document.createElement('canvas');\n      const resolutionScale = 1; // Scale factor for 2x resolution\n      const padding = 40 * resolutionScale;\n      exportCanvas.width = containerWidth * resolutionScale + 2 * padding;\n      exportCanvas.height = containerHeight * resolutionScale + 2 * padding;\n      const ctx = exportCanvas.getContext('2d');\n      ctx.scale(resolutionScale, resolutionScale); // Scale the canvas\n\n      // Fill background\n      ctx.fillStyle = 'white';\n      ctx.fillRect(0, 0, exportCanvas.width, exportCanvas.height);\n\n      // Calculate scaling to maintain aspect ratio\n      const scale = Math.min((exportCanvas.width / resolutionScale - padding * 2) / chartCanvas.width, (exportCanvas.height / resolutionScale - padding * 2) / chartCanvas.height);\n\n      // Draw the chart canvas centered and scaled\n      const x = (exportCanvas.width / resolutionScale - chartCanvas.width * scale) / 2;\n      const y = padding / resolutionScale + 50; // Offset slightly below the title\n\n      ctx.drawImage(chartCanvas, x, y, chartCanvas.width * scale, chartCanvas.height * scale);\n\n      // Get computed styles from elements\n      const titleElement = element.querySelector('h2');\n      const commentaryElement = element.querySelector('p');\n      let contentOffsetY = 50; // Initial offset for title positioning\n\n      if (titleElement) {\n        const titleStyle = window.getComputedStyle(titleElement);\n        ctx.font = `${titleStyle.fontWeight} ${parseInt(titleStyle.fontSize) * resolutionScale}px ${titleStyle.fontFamily}`;\n        ctx.fillStyle = titleStyle.color;\n        ctx.textAlign = 'center';\n        ctx.fillText(titleElement.textContent, exportCanvas.width / (2 * resolutionScale), contentOffsetY);\n        contentOffsetY += 500; // Move down after title for next elements\n      }\n      if (commentaryElement) {\n        const commentaryStyle = window.getComputedStyle(commentaryElement);\n        ctx.font = `${commentaryStyle.fontWeight} ${parseInt(commentaryStyle.fontSize) * resolutionScale}px ${commentaryStyle.fontFamily}`;\n        ctx.fillStyle = commentaryStyle.color;\n        ctx.textAlign = 'center';\n        const maxWidth = (exportCanvas.width - padding * 2) / resolutionScale; // Adjust padding\n        const lineHeight = parseInt(commentaryStyle.fontSize) * 1.5; // Line height\n\n        wrapText(ctx, commentaryElement.textContent, exportCanvas.width / (2 * resolutionScale), contentOffsetY, maxWidth, lineHeight);\n      }\n\n      // Draw watermark\n      const watermarkStyle = window.getComputedStyle(element.querySelector('.text-gray-400') || document.body);\n      ctx.font = `${parseInt(watermarkStyle.fontSize || '14') * resolutionScale}px ${watermarkStyle.fontFamily || 'Inter'}`;\n      ctx.fillStyle = '#9CA3AF'; // text-gray-400\n      ctx.textAlign = 'right';\n      ctx.fillText('Get your Groupchat Wrapped @ wrapped.chat', exportCanvas.width / resolutionScale - 20, exportCanvas.height / resolutionScale - 20);\n      if (type === 'clipboard') {\n        exportCanvas.toBlob(async blob => {\n          try {\n            await navigator.clipboard.write([new ClipboardItem({\n              'image/png': blob\n            })]);\n            alert('Copied to clipboard!');\n          } catch (err) {\n            console.error('Failed to copy to clipboard:', err);\n            downloadCanvas(exportCanvas, elementId);\n          }\n        });\n      } else {\n        downloadCanvas(exportCanvas, elementId);\n      }\n    } else {\n      // Enhanced html2canvas capture for text summaries\n      const canvas = await html2canvas(element, {\n        backgroundColor: 'white',\n        scale: 1,\n        // Double resolution\n        logging: true,\n        width: element.offsetWidth * 1 + 80,\n        height: element.offsetHeight * 1 + 80,\n        windowWidth: element.offsetWidth * 1 + 80,\n        windowHeight: element.offsetHeight * 1 + 80,\n        x: 0,\n        y: 0,\n        onclone: clonedDoc => {\n          const clonedElement = clonedDoc.getElementById(elementId);\n          if (!clonedElement) return;\n\n          // Apply styles explicitly to all elements to ensure consistency\n          clonedElement.style.backgroundColor = 'white';\n          clonedElement.style.padding = '5px';\n          clonedElement.style.display = 'flex';\n          clonedElement.style.flexDirection = 'column';\n          clonedElement.style.alignItems = 'center';\n\n          // Ensure each summary card retains box shadow, padding, and styling\n          const summaryCards = clonedElement.querySelectorAll('.rounded-lg');\n          summaryCards.forEach(card => {\n            card.style.backgroundColor = 'white';\n            //card.style.boxShadow = '0 1px 1px rgba(0, 0, 0, 0.1), 0 1px 1px rgba(0, 0, 0, 0.06)';\n            card.style.padding = '4px';\n            card.style.borderRadius = '0.75rem';\n            card.style.margin = '10px';\n          });\n\n          // Explicitly set fonts, spacing, and alignment\n          const allText = clonedElement.querySelectorAll('h2, p, span');\n          allText.forEach(el => {\n            const originalStyle = window.getComputedStyle(el);\n            el.style.fontFamily = originalStyle.fontFamily;\n            el.style.fontSize = originalStyle.fontSize;\n            el.style.color = originalStyle.color;\n            el.style.lineHeight = originalStyle.lineHeight;\n            el.style.textAlign = 'center';\n          });\n        }\n      });\n      if (type === 'clipboard') {\n        canvas.toBlob(async blob => {\n          try {\n            await navigator.clipboard.write([new ClipboardItem({\n              'image/png': blob\n            })]);\n            alert('Copied to clipboard!');\n          } catch (err) {\n            console.error('Failed to copy to clipboard:', err);\n            downloadCanvas(canvas, elementId);\n          }\n        });\n      } else {\n        downloadCanvas(canvas, elementId);\n      }\n    }\n  } catch (err) {\n    console.error('Export failed:', err);\n  }\n};\n\n// FE components\n\nconst TextSummaryCard = ({\n  title,\n  summary,\n  isVisible\n}) => {\n  if (!summary) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `transition-all duration-700 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-20'}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/50 backdrop-blur-sm shadow-xl w-full max-w-4xl mx-auto rounded-xl\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold mb-6 text-center\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"prose prose-lg max-w-none\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-700 leading-relaxed whitespace-pre-line\",\n            children: summary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 419,\n    columnNumber: 5\n  }, this);\n};\n_c3 = TextSummaryCard;\nconst AnimatedChart = ({\n  chart,\n  isVisible,\n  index\n}) => {\n  _s2();\n  const chartRef = useRef(null);\n  useEffect(() => {\n    return () => {\n      if (chartRef.current && chartRef.current.chartInstance) {\n        chartRef.current.chartInstance.destroy();\n      }\n    };\n  }, []);\n  if (!chart || !chart.data) return null;\n  const options = {\n    responsive: true,\n    maintainAspectRatio: true,\n    scales: {\n      x: {\n        type: 'category',\n        display: true\n      },\n      y: {\n        type: 'linear',\n        display: true\n      }\n    },\n    plugins: {\n      legend: {\n        position: 'top',\n        labels: {\n          font: {\n            family: 'Inter'\n          }\n        }\n      }\n    },\n    animation: {\n      duration: 1000,\n      easing: 'easeInOutQuart'\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `transition-all duration-700 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-20'}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/50 backdrop-blur-sm shadow-xl w-full max-w-4xl mx-auto rounded-xl\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative p-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: `chart-${index}`,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold mb-6 text-center\",\n            children: chart.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full aspect-[16/9]\",\n            children: chart.type === \"Bar\" ? /*#__PURE__*/_jsxDEV(Bar, {\n              ref: chartRef,\n              data: chart.data,\n              options: options\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 17\n            }, this) : chart.type === \"Line\" ? /*#__PURE__*/_jsxDEV(Line, {\n              ref: chartRef,\n              data: chart.data,\n              options: options\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Unsupported chart type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-gray-600 text-center\",\n            children: chart.commentary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-right mt-6\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-400 text-sm\",\n              children: \"Get your Groupchat Wrapped @ wrapped.chat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-4 right-4 flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleExport(`chart-${index}`, 'clipboard'),\n            className: \"p-2 rounded-full bg-white/80 hover:bg-white transition-colors shadow-sm\",\n            title: \"Copy to clipboard\",\n            children: /*#__PURE__*/_jsxDEV(Copy, {\n              className: \"w-4 h-4 text-gray-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleExport(`chart-${index}`, 'download'),\n            className: \"p-2 rounded-full bg-white/80 hover:bg-white transition-colors shadow-sm\",\n            title: \"Download as PNG\",\n            children: /*#__PURE__*/_jsxDEV(Camera, {\n              className: \"w-4 h-4 text-gray-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 473,\n    columnNumber: 5\n  }, this);\n};\n_s2(AnimatedChart, \"X+1SfQQ6xefXNU27aQW843M7cTw=\");\n_c4 = AnimatedChart;\nconst DaySummariesGrid = ({\n  summaries,\n  isVisible\n}) => {\n  if (!summaries || summaries.length === 0) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `transition-all duration-700 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-20'}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative bg-white/50 backdrop-blur-sm shadow-xl w-full max-w-6xl mx-auto rounded-xl p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"summaries-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold mb-6 text-center\",\n          children: \"Notable Days\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",\n          children: summaries.map((summary, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/70 backdrop-blur-sm rounded-lg shadow-md p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold mb-4\",\n              children: summary.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-gray-700 leading-relaxed\",\n              children: typeof summary.summary === 'object' ? JSON.stringify(summary.summary, null, 2) : summary.summary\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 537,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-right mt-4\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400 text-sm\",\n                children: \"Get your Groupchat Wrapped @ wrapped.chat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-4 right-4 flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleExport('summaries-grid', 'clipboard'),\n          className: \"p-2 rounded-full bg-white/80 hover:bg-white transition-colors shadow-sm\",\n          title: \"Copy to clipboard\",\n          children: /*#__PURE__*/_jsxDEV(Copy, {\n            className: \"w-4 h-4 text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleExport('summaries-grid', 'download'),\n          className: \"p-2 rounded-full bg-white/80 hover:bg-white transition-colors shadow-sm\",\n          title: \"Download as PNG\",\n          children: /*#__PURE__*/_jsxDEV(Camera, {\n            className: \"w-4 h-4 text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 526,\n    columnNumber: 5\n  }, this);\n};\n\n// Build chart datasets from analysisData\n_c5 = DaySummariesGrid;\nconst buildChartDataSets = analysisData => {\n  if (!analysisData) return [];\n  const chartDataSets = [];\n  try {\n    var _analysisData$top_ten;\n    // Day of Week Chart\n    if (isValidArray(analysisData.day_of_week.data)) {\n      const labels = analysisData.day_of_week.data.map(d => safeGet(d, 'day_of_week'));\n      const values = analysisData.day_of_week.data.map(d => safeGet(d, 'avg_messages', 0));\n      const {\n        sortedLabels,\n        sortedData\n      } = sortBarData(labels, values);\n      chartDataSets.push({\n        title: \"Average Messages by Day of Week\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'Avg Messages by Day of Week',\n            data: sortedData,\n            backgroundColor: 'rgba(54, 162, 235, 0.6)'\n          }]\n        },\n        commentary: analysisData.day_of_week.caption\n      });\n    }\n\n    // Monthly Messages Chart\n    if (isValidArray(analysisData.monthly_messages.data)) {\n      chartDataSets.push({\n        title: \"Monthly Message Count\",\n        type: \"Line\",\n        data: {\n          labels: analysisData.monthly_messages.data.map(d => safeGet(d, 'date')),\n          datasets: [{\n            label: 'Messages per Month',\n            data: analysisData.monthly_messages.data.map(d => safeGet(d, 'message_count', 0)),\n            borderColor: 'rgba(255, 99, 132, 1)',\n            fill: false\n          }]\n        },\n        commentary: analysisData.monthly_messages.caption\n      });\n    }\n\n    // Average Messages Sent Chart\n    if (isValidArray(analysisData.avg_messages_sent.data)) {\n      chartDataSets.push({\n        title: \"Average Messages Sent per Month\",\n        type: \"Line\",\n        data: {\n          labels: analysisData.avg_messages_sent.data.map(d => safeGet(d, 'month')),\n          datasets: [{\n            label: 'Avg Messages per Month',\n            data: analysisData.avg_messages_sent.data.map(d => safeGet(d, 'avg_messages_sent', 0)),\n            borderColor: 'rgba(75, 192, 192, 1)',\n            fill: false\n          }]\n        },\n        commentary: analysisData.avg_messages_sent.caption\n      });\n    }\n\n    // Quarterly Contribution Chart\n    if (isValidArray(analysisData.quarterly_contribution.data)) {\n      const quarterData = groupBySender(analysisData.quarterly_contribution.data, 'date', 'message_count');\n      if (quarterData.dates.length > 0 && quarterData.datasets.length > 0) {\n        chartDataSets.push({\n          title: \"Quarterly Message Contribution by Sender\",\n          type: \"Line\",\n          data: {\n            labels: quarterData.dates,\n            datasets: quarterData.datasets\n          },\n          commentary: analysisData.quarterly_contribution.caption\n        });\n      }\n    }\n\n    // Yearly Comparison Chart\n    if (isValidArray(analysisData.yearly_comparison.data)) {\n      const labels = analysisData.yearly_comparison.data.map(d => safeGet(d, 'sender'));\n      const values = analysisData.yearly_comparison.data.map(d => safeGet(d, 'percent_change', 0));\n      const {\n        sortedLabels,\n        sortedData\n      } = sortBarData(labels, values);\n      chartDataSets.push({\n        title: \"Year-Over-Year Message Change\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'YoY % Change',\n            data: sortedData,\n            backgroundColor: 'rgba(153, 102, 255, 0.6)'\n          }]\n        },\n        commentary: analysisData.yearly_comparison.caption\n      });\n    }\n\n    // Top Ten Days Chart\n    if (isValidArray(analysisData.top_ten_days.data)) {\n      const labels = analysisData.top_ten_days.data.map(d => safeGet(d, 'day'));\n      const values = analysisData.top_ten_days.data.map(d => safeGet(d, 'chats', 0));\n      const {\n        sortedLabels,\n        sortedData\n      } = sortBarData(labels, values);\n      chartDataSets.push({\n        title: \"Top 10 Most Active Days\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'Number of Messages',\n            data: sortedData,\n            backgroundColor: 'rgba(255, 206, 86, 0.6)'\n          }]\n        },\n        commentary: analysisData.top_ten_days.caption\n      });\n    }\n\n    // Top 3 days summaries\n\n    if ((_analysisData$top_ten = analysisData.top_ten_days) !== null && _analysisData$top_ten !== void 0 && _analysisData$top_ten.day_summaries && Array.isArray(analysisData.top_ten_days.day_summaries)) {\n      const summaries = analysisData.top_ten_days.day_summaries.map(dayData => ({\n        title: String(dayData.date || ''),\n        summary: String(dayData.content.summary || '')\n      })).filter(summary => summary.title && summary.summary); // Filter out any empty summaries\n\n      if (summaries.length > 0) {\n        chartDataSets.push({\n          type: \"SummaryGrid\",\n          summaries: summaries\n        });\n      }\n    }\n\n    // Manic Data Chart\n    if (isValidArray(analysisData.manic.data)) {\n      const labels = analysisData.manic.data.map(d => safeGet(d, 'sender'));\n      const values = analysisData.manic.data.map(d => safeGet(d, 'percent_manic', 0));\n      const {\n        sortedLabels,\n        sortedData\n      } = sortBarData(labels, values);\n      chartDataSets.push({\n        title: \"Most Manic Award\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: '% Messages (10pm-4am)',\n            data: sortedData,\n            backgroundColor: 'rgba(54, 162, 235, 0.6)'\n          }]\n        },\n        commentary: analysisData.manic.caption\n      });\n    }\n\n    // Most Ignored Chart\n    if (isValidArray(analysisData.most_ignored.data)) {\n      const labels = analysisData.most_ignored.data.map(d => safeGet(d, 'sender'));\n      const values = analysisData.most_ignored.data.map(d => safeGet(d, 'average_time_to_respond', 0));\n      const {\n        sortedLabels,\n        sortedData\n      } = sortBarData(labels, values);\n      chartDataSets.push({\n        title: \"Most Ignored Member :(\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'Average Minutes Until Response',\n            data: sortedData,\n            backgroundColor: 'rgba(54, 162, 235, 0.6)'\n          }]\n        },\n        commentary: analysisData.most_ignored.caption\n      });\n    }\n\n    // Novelist Award\n    if (isValidArray(analysisData.novelist.data)) {\n      const labels = analysisData.novelist.data.map(d => safeGet(d, 'sender'));\n      const values = analysisData.novelist.data.map(d => safeGet(d, 'average_message_length', 0));\n      const {\n        sortedLabels,\n        sortedData\n      } = sortBarData(labels, values);\n      chartDataSets.push({\n        title: \"Groupchat Novelist Award\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'Average Characters per Message',\n            data: sortedData,\n            backgroundColor: 'rgba(54, 162, 235, 0.6)'\n          }]\n        },\n        commentary: analysisData.novelist.caption\n      });\n    }\n\n    // Swear Data Chart\n    if (isValidArray(analysisData.swears.data)) {\n      const labels = analysisData.swears.data.map(d => safeGet(d, 'sender'));\n      const values = analysisData.swears.data.map(d => safeGet(d, 'swears_per_message', 0));\n      const {\n        sortedLabels,\n        sortedData\n      } = sortBarData(labels, values);\n      chartDataSets.push({\n        title: \"Swear Word Frequency\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'Swears per Message',\n            data: sortedData,\n            backgroundColor: 'rgba(255, 99, 132, 0.6)'\n          }]\n        },\n        commentary: analysisData.swears.caption\n      });\n    }\n\n    // Hangout Data Chart\n    if (isValidArray(analysisData.hangout.data)) {\n      const labels = analysisData.hangout.data.map(d => safeGet(d, 'sender'));\n      const values = analysisData.hangout.data.map(d => safeGet(d, 'hangouts_per_message', 0));\n      const {\n        sortedLabels,\n        sortedData\n      } = sortBarData(labels, values);\n      chartDataSets.push({\n        title: \"Hangout Discussion Frequency\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'Hangout References per Message',\n            data: sortedData,\n            backgroundColor: 'rgba(75, 192, 192, 0.6)'\n          }]\n        },\n        commentary: analysisData.hangout.caption\n      });\n    }\n    chartDataSets.push({\n      type: \"TextSummaryCard\",\n      title: \"That's all folks!\",\n      summary: \"We wish you and your groupchat the happiest of New Years! We like to have fun around here but all jokes aside, everyone in the groupchat is special, whether it's the guy who always posts videos you're not going to watch, or the old college bud with three kids that hasn't posted since the last one was born (cute pics though.) Shoot 'em a message and let em know you care. Share this Wrapped. Help us keep the lights on <3\"\n    });\n  } catch (error) {\n    console.error('Error building chart datasets:', error);\n  }\n  return chartDataSets;\n};\nconst App = () => {\n  _s3();\n  const [phase, setPhase] = useState('upload');\n  const [connectionMethod, setConnectionMethod] = useState(null);\n  const [analysisData, setAnalysisData] = useState(null);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [currentChartIndex, setCurrentChartIndex] = useState(0);\n  const [isScrolling, setIsScrolling] = useState(false);\n  const [error, setError] = useState(null);\n  const handleFileChange = e => {\n    if (e.target.files && e.target.files[0]) {\n      console.log('File selected:', e.target.files[0].name);\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n  const handleFileUpload = async () => {\n    if (!selectedFile) {\n      console.warn('No file selected when attempting upload.');\n      return;\n    }\n    console.log('Starting file upload and analysis...');\n    setPhase('loading');\n    const reader = new FileReader();\n    reader.onload = async ev => {\n      try {\n        console.log('File read successful, sending to /analyze');\n        const response = await fetch(`${analysisApiUrl}/analyze`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            transcript: ev.target.result\n          })\n        });\n        if (!response.ok) throw new Error('Analysis fetch not ok');\n        const json = await response.json();\n        console.log('Analysis data received:', json);\n        setAnalysisData(json);\n        setPhase('visualize');\n        setCurrentChartIndex(0);\n      } catch (error) {\n        console.error('Error processing file:', error);\n        setError('Analysis failed');\n        setPhase('upload');\n      }\n    };\n    reader.onerror = () => {\n      console.error('Error reading file');\n      setError('Failed to read file');\n      setPhase('upload');\n    };\n    reader.readAsText(selectedFile);\n  };\n  const handleWhatsAppChat = async (sessionId, chatId) => {\n    console.log('Analyzing WhatsApp chat:', {\n      sessionId,\n      chatId\n    });\n    setPhase('loading');\n    try {\n      const response = await fetch('http://localhost:3001/analyze-whatsapp-chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          sessionId,\n          chatId\n        })\n      });\n      if (!response.ok) throw new Error('WhatsApp analysis fetch not ok');\n      const json = await response.json();\n      console.log('WhatsApp analysis data received:', json);\n      setAnalysisData(json);\n      setPhase('visualize');\n      setCurrentChartIndex(0);\n    } catch (error) {\n      console.error('WhatsApp analysis error:', error);\n      setError('Analysis failed');\n      setPhase('upload');\n    }\n  };\n  const handleScroll = e => {\n    if (isScrolling || !analysisData) return;\n    const chartDataSets = buildChartDataSets(analysisData);\n    if (!chartDataSets.length) return;\n    setIsScrolling(true);\n    if (e.deltaY > 0 && currentChartIndex < chartDataSets.length - 1) {\n      setCurrentChartIndex(prev => prev + 1);\n    } else if (e.deltaY < 0 && currentChartIndex > 0) {\n      setCurrentChartIndex(prev => prev - 1);\n    }\n    setTimeout(() => setIsScrolling(false), 700);\n  };\n\n  // Phase-based rendering:\n  if (phase === 'upload') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-xl p-8 bg-white/70 backdrop-blur-sm rounded-xl shadow-lg\",\n        children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6 p-1 bg-red-50 text-red-700 rounded-lg\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 941,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-center mb-8\",\n          children: \"Groupchat Wrapped 2024\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 946,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/giftbox_opening.gif\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 947,\n          columnNumber: 11\n        }, this), !connectionMethod ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-8 p-1\",\n            align: \"center\",\n            children: \"It's been quite a year huh? Let's review! To get started, click the button below import your groupchat data. Don't worry - we won't save anything beyond this session.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 950,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setConnectionMethod('file'),\n            className: \"w-full p-6 text-left border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold mb-2\",\n              children: \"Upload Chat File\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 955,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              children: \"Export your chat from WhatsApp and upload the file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 956,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 951,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 949,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setConnectionMethod(null);\n              setError(null);\n            },\n            className: \"mb-6 text-gray-600 hover:text-gray-800\",\n            children: \"\\u2190 Back to options\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 961,\n            columnNumber: 15\n          }, this), connectionMethod === 'file' ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              align: \"center\",\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"https://faq.whatsapp.com/1180414079177245/?cms_platform=iphone&helpref=platform_switcher&locale=en_US\",\n                target: \"_blank\",\n                children: \"To learn how to export your chat history from WhatsApp, click here.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 973,\n                columnNumber: 65\n              }, this), \" You don't need to attach media.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 973,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block w-full px-4 py-8 border-2 border-dashed border-gray-300 rounded-lg text-center cursor-pointer hover:border-blue-500 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \".txt\",\n                onChange: handleFileChange,\n                className: \"hidden\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 975,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-600\",\n                children: selectedFile ? selectedFile.name : \"Drop your WhatsApp chat file here or click to browse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 981,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 974,\n              columnNumber: 19\n            }, this), selectedFile && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleFileUpload,\n              className: \"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",\n              children: \"Analyze Chat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 987,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 972,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(WhatsAppConnector, {\n            onChatSelected: handleWhatsAppChat\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 996,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 960,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 939,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 938,\n      columnNumber: 7\n    }, this);\n  }\n  if (phase === 'loading') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex flex-col items-center justify-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mb-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1008,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-medium text-gray-700\",\n        children: \"Analyzing your chat...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1009,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1007,\n      columnNumber: 7\n    }, this);\n  }\n  if (phase === 'error') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-50 border-l-4 border-red-400 p-4 max-w-md\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"h-5 w-5 text-red-400\",\n              fill: \"currentColor\",\n              viewBox: \"0 0 20 20\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                fillRule: \"evenodd\",\n                d: \"M10 18a8 8 0 100-16 8 8 0 000 16zm-1.293-5.293a1  1 0 011.414 0L10 13.586l1.293-1.293a1 1 0 011.414 1.414L11.414  15l1.293 1.293a1 1 0 01-1.414 1.414L10 16.414l-1.293  1.293a1 1 0 01-1.414-1.414L8.586 15l-1.293-1.293a1 1 0  010-1.414z\",\n                clipRule: \"evenodd\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1021,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1020,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1019,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-3\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-red-700\",\n              children: \"There was an error analyzing your chat. Please try again.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1029,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1028,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1018,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1017,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1016,\n      columnNumber: 7\n    }, this);\n  }\n  if (phase === 'visualize') {\n    const chartDataSets = buildChartDataSets(analysisData);\n    if (!chartDataSets || chartDataSets.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-yellow-50 border-l-4 border-yellow-400 p-4 max-w-md\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-0\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"h-5 w-5 text-yellow-400\",\n                viewBox: \"0 0 20 20\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  fillRule: \"evenodd\",\n                  d: \"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\",\n                  clipRule: \"evenodd\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1048,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1047,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1046,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ml-3\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-yellow-700\",\n                children: \"No data available for visualization\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1052,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1051,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1045,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1044,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1043,\n        columnNumber: 9\n      }, this);\n    }\n    const safeCurrentIndex = Math.max(0, Math.min(currentChartIndex, chartDataSets.length - 1));\n    const currentItem = chartDataSets[safeCurrentIndex];\n    const showScrollIndicator = safeCurrentIndex < chartDataSets.length - 1;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-8\",\n      onWheel: handleScroll,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed top-4 right-4 bg-white/80 backdrop-blur-sm rounded-full px-4 py-2 text-sm text-gray-600\",\n        children: [safeCurrentIndex + 1, \" of \", chartDataSets.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1072,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full\",\n        children: currentItem && (currentItem.type === \"SummaryGrid\" ? /*#__PURE__*/_jsxDEV(DaySummariesGrid, {\n          summaries: currentItem.summaries,\n          isVisible: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1080,\n          columnNumber: 15\n        }, this) : currentItem.data ? /*#__PURE__*/_jsxDEV(AnimatedChart, {\n          chart: currentItem,\n          isVisible: true,\n          index: safeCurrentIndex\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1085,\n          columnNumber: 15\n        }, this) : currentItem.type === \"TextSummaryCard\" ? /*#__PURE__*/_jsxDEV(TextSummaryCard, {\n          title: currentItem.title,\n          summary: currentItem.summary,\n          isVisible: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1091,\n          columnNumber: 15\n        }, this) : null)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1077,\n        columnNumber: 9\n      }, this), showScrollIndicator && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed right-12 top-1/2 -translate-y-1/2 flex flex-col items-center animate-fade-in\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-bounce flex flex-col items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"24\",\n            height: \"24\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            className: \"text-blue-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"line\", {\n              x1: \"12\",\n              y1: \"5\",\n              x2: \"12\",\n              y2: \"19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1116,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n              points: \"19 12 12 19 5 12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1117,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1105,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm font-medium text-gray-500 mt-2\",\n            children: \"Scroll Down\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1119,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1104,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1103,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1067,\n      columnNumber: 7\n    }, this);\n  }\n\n  // If none of the phases matched, show an error\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex items-center justify-center p-4 bg-red-50 text-red-700\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Unexpected state. Please reload the page.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1130,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1129,\n    columnNumber: 5\n  }, this);\n};\n_s3(App, \"LxEENDyCYoRyUCYNuHb1vgte0Is=\");\n_c6 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"ScrollIndicator\");\n$RefreshReg$(_c2, \"WhatsAppConnector\");\n$RefreshReg$(_c3, \"TextSummaryCard\");\n$RefreshReg$(_c4, \"AnimatedChart\");\n$RefreshReg$(_c5, \"DaySummariesGrid\");\n$RefreshReg$(_c6, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","html2canvas","Camera","Copy","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","BarElement","Title","Tooltip","Legend","Bar","Line","jsxDEV","_jsxDEV","register","analysisApiUrl","process","env","ANALYSIS_API_URL","ScrollIndicator","showIndicator","className","children","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","fileName","_jsxFileName","lineNumber","columnNumber","points","_c","WhatsAppConnector","onChatSelected","_s","sessionId","setSessionId","qrCode","setQrCode","status","setStatus","error","setError","initializeConnection","console","log","response","fetch","method","ok","Error","data","json","message","src","alt","onClick","disabled","_c2","isValidArray","arr","Array","isArray","length","safeGet","obj","path","defaultValue","_path$split$reduce","split","reduce","acc","part","sortBarData","labels","sortedLabels","sortedData","pairs","map","label","i","sort","a","b","pair","getRandomColor","r","Math","floor","random","g","generateDistinctColors","count","hueStep","from","_","hue","wrapText","ctx","text","x","y","maxWidth","lineHeight","words","line","lines","word","testLine","metrics","measureText","testWidth","push","trim","forEach","index","fillText","groupBySender","dateField","valueField","dates","datasets","senders","Set","d","filter","Boolean","colors","sender","senderData","values","dt","entry","find","color","borderColor","backgroundColor","downloadCanvas","canvas","filename","link","document","createElement","download","href","toDataURL","click","handleExport","elementId","type","element","getElementById","fonts","ready","Promise","resolve","setTimeout","isChart","querySelector","chartCanvas","containerWidth","offsetWidth","containerHeight","offsetHeight","exportCanvas","resolutionScale","padding","getContext","scale","fillStyle","fillRect","min","drawImage","titleElement","commentaryElement","contentOffsetY","titleStyle","window","getComputedStyle","font","fontWeight","parseInt","fontSize","fontFamily","textAlign","textContent","commentaryStyle","watermarkStyle","body","toBlob","blob","navigator","clipboard","write","ClipboardItem","alert","err","logging","windowWidth","windowHeight","onclone","clonedDoc","clonedElement","style","display","flexDirection","alignItems","summaryCards","querySelectorAll","card","borderRadius","margin","allText","el","originalStyle","TextSummaryCard","title","summary","isVisible","_c3","AnimatedChart","chart","_s2","chartRef","current","chartInstance","destroy","options","responsive","maintainAspectRatio","scales","plugins","legend","position","family","animation","duration","easing","id","ref","commentary","_c4","DaySummariesGrid","summaries","JSON","stringify","_c5","buildChartDataSets","analysisData","chartDataSets","_analysisData$top_ten","day_of_week","caption","monthly_messages","avg_messages_sent","quarterly_contribution","quarterData","yearly_comparison","top_ten_days","day_summaries","dayData","String","date","content","manic","most_ignored","novelist","swears","hangout","App","_s3","phase","setPhase","connectionMethod","setConnectionMethod","setAnalysisData","selectedFile","setSelectedFile","currentChartIndex","setCurrentChartIndex","isScrolling","setIsScrolling","handleFileChange","e","target","files","name","handleFileUpload","warn","reader","FileReader","onload","ev","headers","transcript","result","onerror","readAsText","handleWhatsAppChat","chatId","handleScroll","deltaY","prev","align","accept","onChange","fillRule","clipRule","safeCurrentIndex","max","currentItem","showScrollIndicator","onWheel","_c6","$RefreshReg$"],"sources":["/Users/momos/git/whatsapp-analyzer/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport html2canvas from 'html2canvas';\nimport { Camera, Copy } from 'lucide-react';\n\n\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n} from 'chart.js';\nimport { Bar, Line } from 'react-chartjs-2';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nconst analysisApiUrl = process.env.ANALYSIS_API_URL;\n\n// ScrollIndicator component\nconst ScrollIndicator = ({ showIndicator }) => {\n  if (!showIndicator) return null;\n  \n  return (\n    <div className=\"fixed right-12 top-1/2 -translate-y-1/2 flex flex-col items-center animate-fade-in\">\n      <div className=\"animate-bounce flex flex-col items-center\">\n        <svg \n          width=\"24\" \n          height=\"24\" \n          viewBox=\"0 0 24 24\" \n          fill=\"none\" \n          stroke=\"currentColor\" \n          strokeWidth=\"2\" \n          strokeLinecap=\"round\" \n          strokeLinejoin=\"round\" \n          className=\"text-blue-500\"\n        >\n          <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\n          <polyline points=\"19 12 12 19 5 12\"></polyline>\n        </svg>\n        <p className=\"text-sm font-medium text-gray-500 mt-2\">Scroll Down</p>\n      </div>\n    </div>\n  );\n};\n\n// Whataspp connector\nconst WhatsAppConnector = ({ onChatSelected }) => {\n  const [sessionId, setSessionId] = useState(null);\n  const [qrCode, setQrCode] = useState(null);\n  const [status, setStatus] = useState('idle');\n  const [error, setError] = useState(null);\n\n  const initializeConnection = async () => {\n    console.log('Initializing WhatsApp connection...');\n    try {\n      setStatus('connecting');\n      const response = await fetch('http://localhost:3001/connect-whatsapp', {\n        method: 'POST'\n      });\n      \n      if (!response.ok) throw new Error('Failed to connect to WhatsApp');\n      \n      const data = await response.json();\n      console.log('WhatsApp connect response:', data);\n      \n      if (data.qrCode && data.sessionId) {\n        setQrCode(data.qrCode);\n        setSessionId(data.sessionId);\n        setStatus('awaiting_scan');\n      } else {\n        throw new Error('No QR code or sessionId returned');\n      }\n    } catch (error) {\n      console.error('WhatsApp connect error:', error);\n      setError(error.message);\n      setStatus('error');\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {error && (\n        <div className=\"p-4 bg-red-50 text-red-700 rounded-lg\">\n          {error}\n        </div>\n      )}\n\n      {qrCode ? (\n        <div className=\"text-center\">\n          <img \n            src={`data:image/png;base64,${qrCode}`} \n            alt=\"WhatsApp QR Code\"\n            className=\"mx-auto mb-4\"\n          />\n          <p className=\"text-sm text-gray-600\">\n            Scan this QR code with WhatsApp\n          </p>\n        </div>\n      ) : (\n        <button\n          onClick={initializeConnection}\n          disabled={status === 'connecting'}\n          className=\"w-full px-4 py-3 bg-green-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-700 transition-colors\"\n        >\n          {status === 'connecting' ? 'Connecting...' : 'Connect to WhatsApp'}\n        </button>\n      )}\n    </div>\n  );\n};\n\n\n// Helper functions\nconst isValidArray = (arr) => Array.isArray(arr) && arr.length > 0;\n\nconst safeGet = (obj, path, defaultValue = '') => {\n  try {\n    return path.split('.').reduce((acc, part) => acc?.[part], obj) ?? defaultValue;\n  } catch {\n    return defaultValue;\n  }\n};\nconst sortBarData = (labels, data) => {\n  if (!isValidArray(labels) || !isValidArray(data) || labels.length !== data.length) {\n    return { sortedLabels: labels || [], sortedData: data || [] };\n  }\n  const pairs = labels.map((label, i) => [label, data[i]]);\n  pairs.sort((a, b) => b[1] - a[1]);\n  return {\n    sortedLabels: pairs.map(pair => pair[0]),\n    sortedData: pairs.map(pair => pair[1])\n  };\n};\nconst getRandomColor = () => {\n  const r = Math.floor(Math.random() * 255);\n  const g = Math.floor(Math.random() * 255);\n  const b = Math.floor(Math.random() * 255);\n  return `rgba(${r}, ${g}, ${b}, 0.6)`;\n};\nconst generateDistinctColors = (count) => {\n  const hueStep = 360 / count;\n  return Array.from({ length: count }, (_, i) => {\n    const hue = i * hueStep;\n    return `hsla(${hue}, 70%, 60%, 0.6)`;\n  });\n};\n\nconst wrapText = (ctx, text, x, y, maxWidth, lineHeight) => {\n  console.log('Wrapping text:', text); // Debug the input text\n  const words = text.split(' ');\n  let line = '';\n  const lines = [];\n\n  // Break text into multiple lines\n  for (const word of words) {\n    const testLine = line + word + ' ';\n    const metrics = ctx.measureText(testLine);\n    const testWidth = metrics.width;\n\n    if (testWidth > maxWidth && line !== '') {\n      console.log('Line exceeds maxWidth:', line); // Debug each wrapped line\n      lines.push(line.trim());\n      line = word + ' ';\n    } else {\n      line = testLine;\n    }\n  }\n  lines.push(line.trim()); // Add the last line\n  console.log('Final wrapped lines:', lines); // Debug the final lines array\n\n  // Draw each line of text\n  lines.forEach((line, index) => {\n    console.log('Drawing line:', line, 'at y:', y + index * lineHeight); // Debug the position of each line\n    ctx.fillText(line, x, y + index * lineHeight);\n  });\n};\n\n\n\nconst groupBySender = (data, dateField='date', valueField='message_count') => {\n  if (!isValidArray(data)) return { dates: [], datasets: [] };\n  \n  try {\n    const senders = [...new Set(data.map(d => safeGet(d, 'sender')))].filter(Boolean);\n    const dates = [...new Set(data.map(d => safeGet(d, dateField)))].filter(Boolean).sort();\n    const colors = generateDistinctColors(senders.length);\n\n    const datasets = senders.map((sender, index) => {\n      const senderData = data.filter(d => safeGet(d, 'sender') === sender);\n      const values = dates.map(dt => {\n        const entry = senderData.find(x => safeGet(x, dateField) === dt);\n        return safeGet(entry, valueField, 0);\n      });\n      \n      const color = colors[index];\n      \n      return {\n        label: sender,\n        data: values,\n        borderColor: color,\n        backgroundColor: color,\n        fill: true\n      };\n    });\n\n    return { dates, datasets };\n  } catch (error) {\n    console.error('Error in groupBySender:', error);\n    return { dates: [], datasets: [] };\n  }\n};\n\nconst downloadCanvas = (canvas, filename) => {\n  const link = document.createElement('a');\n  link.download = `${filename}.png`;\n  link.href = canvas.toDataURL('image/png');\n  link.click();\n};\n\n\nconst handleExport = async (elementId, type) => {\n  const element = document.getElementById(elementId);\n  if (!element) return;\n\n  try {\n    // Wait for fonts to load\n    await document.fonts.ready;\n    await new Promise(resolve => setTimeout(resolve, 100));\n\n    // Check if this is a chart (has canvas element)\n    const isChart = element.querySelector('canvas') !== null;\n\n    if (isChart) {\n      const chartCanvas = element.querySelector('canvas');\n      const containerWidth = element.offsetWidth;\n      const containerHeight = element.offsetHeight;\n\n      // Create a new canvas with scaled dimensions\n      const exportCanvas = document.createElement('canvas');\n      const resolutionScale = 1; // Scale factor for 2x resolution\n      const padding = 40 * resolutionScale;\n\n      exportCanvas.width = (containerWidth * resolutionScale) + 2 * padding;\n      exportCanvas.height = (containerHeight * resolutionScale) + 2 * padding;\n\n      const ctx = exportCanvas.getContext('2d');\n      ctx.scale(resolutionScale, resolutionScale); // Scale the canvas\n\n      // Fill background\n      ctx.fillStyle = 'white';\n      ctx.fillRect(0, 0, exportCanvas.width, exportCanvas.height);\n\n      // Calculate scaling to maintain aspect ratio\n      const scale = Math.min(\n        (exportCanvas.width / resolutionScale - padding * 2) / chartCanvas.width,\n        (exportCanvas.height / resolutionScale - padding * 2) / chartCanvas.height\n      );\n\n      // Draw the chart canvas centered and scaled\n      const x = (exportCanvas.width / resolutionScale - chartCanvas.width * scale) / 2;\n      const y = padding / resolutionScale + 50; // Offset slightly below the title\n\n      ctx.drawImage(\n        chartCanvas,\n        x,\n        y,\n        chartCanvas.width * scale,\n        chartCanvas.height * scale\n      );\n\n      // Get computed styles from elements\n      const titleElement = element.querySelector('h2');\n      const commentaryElement = element.querySelector('p');\n\n      let contentOffsetY = 50; // Initial offset for title positioning\n\n      if (titleElement) {\n        const titleStyle = window.getComputedStyle(titleElement);\n        ctx.font = `${titleStyle.fontWeight} ${parseInt(titleStyle.fontSize) * resolutionScale}px ${titleStyle.fontFamily}`;\n        ctx.fillStyle = titleStyle.color;\n        ctx.textAlign = 'center';\n\n        ctx.fillText(\n          titleElement.textContent,\n          exportCanvas.width / (2 * resolutionScale),\n          contentOffsetY\n        );\n        contentOffsetY += 500; // Move down after title for next elements\n      }\n\n      if (commentaryElement) {\n        const commentaryStyle = window.getComputedStyle(commentaryElement);\n        ctx.font = `${commentaryStyle.fontWeight} ${parseInt(commentaryStyle.fontSize) * resolutionScale}px ${commentaryStyle.fontFamily}`;\n        ctx.fillStyle = commentaryStyle.color;\n        ctx.textAlign = 'center';\n\n        const maxWidth = (exportCanvas.width - padding * 2) / resolutionScale; // Adjust padding\n        const lineHeight = parseInt(commentaryStyle.fontSize) * 1.5; // Line height\n\n        wrapText(ctx, commentaryElement.textContent, exportCanvas.width / (2 * resolutionScale), contentOffsetY, maxWidth, lineHeight);\n      }\n\n      // Draw watermark\n      const watermarkStyle = window.getComputedStyle(element.querySelector('.text-gray-400') || document.body);\n      ctx.font = `${parseInt(watermarkStyle.fontSize || '14') * resolutionScale}px ${watermarkStyle.fontFamily || 'Inter'}`;\n      ctx.fillStyle = '#9CA3AF'; // text-gray-400\n      ctx.textAlign = 'right';\n      ctx.fillText(\n        'Get your Groupchat Wrapped @ wrapped.chat',\n        exportCanvas.width / resolutionScale - 20,\n        exportCanvas.height / resolutionScale - 20\n      );\n\n      if (type === 'clipboard') {\n        exportCanvas.toBlob(async (blob) => {\n          try {\n            await navigator.clipboard.write([\n              new ClipboardItem({ 'image/png': blob })\n            ]);\n            alert('Copied to clipboard!');\n          } catch (err) {\n            console.error('Failed to copy to clipboard:', err);\n            downloadCanvas(exportCanvas, elementId);\n          }\n        });\n      } else {\n        downloadCanvas(exportCanvas, elementId);\n      }\n    } else {\n      // Enhanced html2canvas capture for text summaries\n      const canvas = await html2canvas(element, {\n        backgroundColor: 'white',\n        scale: 1, // Double resolution\n        logging: true,\n        width: element.offsetWidth * 1 + 80,\n        height: element.offsetHeight * 1 + 80,\n        windowWidth: element.offsetWidth * 1 + 80,\n        windowHeight: element.offsetHeight * 1 + 80,\n        x: 0,\n        y: 0,\n        onclone: (clonedDoc) => {\n          const clonedElement = clonedDoc.getElementById(elementId);\n          if (!clonedElement) return;\n\n          // Apply styles explicitly to all elements to ensure consistency\n          clonedElement.style.backgroundColor = 'white';\n          clonedElement.style.padding = '5px';\n          clonedElement.style.display = 'flex';\n          clonedElement.style.flexDirection = 'column';\n          clonedElement.style.alignItems = 'center';\n\n          // Ensure each summary card retains box shadow, padding, and styling\n          const summaryCards = clonedElement.querySelectorAll('.rounded-lg');\n          summaryCards.forEach(card => {\n            card.style.backgroundColor = 'white';\n            //card.style.boxShadow = '0 1px 1px rgba(0, 0, 0, 0.1), 0 1px 1px rgba(0, 0, 0, 0.06)';\n            card.style.padding = '4px';\n            card.style.borderRadius = '0.75rem';\n            card.style.margin = '10px';\n          });\n\n          // Explicitly set fonts, spacing, and alignment\n          const allText = clonedElement.querySelectorAll('h2, p, span');\n          allText.forEach(el => {\n            const originalStyle = window.getComputedStyle(el);\n            el.style.fontFamily = originalStyle.fontFamily;\n            el.style.fontSize = originalStyle.fontSize;\n            el.style.color = originalStyle.color;\n            el.style.lineHeight = originalStyle.lineHeight;\n            el.style.textAlign = 'center';\n          });\n        }\n      });\n\n      if (type === 'clipboard') {\n        canvas.toBlob(async (blob) => {\n          try {\n            await navigator.clipboard.write([\n              new ClipboardItem({ 'image/png': blob })\n            ]);\n            alert('Copied to clipboard!');\n          } catch (err) {\n            console.error('Failed to copy to clipboard:', err);\n            downloadCanvas(canvas, elementId);\n          }\n        });\n      } else {\n        downloadCanvas(canvas, elementId);\n      }\n    }\n  } catch (err) {\n    console.error('Export failed:', err);\n  }\n};\n\n\n\n\n\n// FE components\n\nconst TextSummaryCard = ({ title, summary, isVisible }) => {\n  if (!summary) return null;\n  \n  return (\n    <div className={`transition-all duration-700 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-20'}`}>\n      <div className=\"bg-white/50 backdrop-blur-sm shadow-xl w-full max-w-4xl mx-auto rounded-xl\">\n        <div className=\"p-8\">\n          <h2 className=\"text-2xl font-bold mb-6 text-center\">{title}</h2>\n          <div className=\"prose prose-lg max-w-none\">\n            <p className=\"text-gray-700 leading-relaxed whitespace-pre-line\">\n              {summary}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst AnimatedChart = ({ chart, isVisible, index }) => {\n  const chartRef = useRef(null);\n\n  useEffect(() => {\n    return () => {\n      if (chartRef.current && chartRef.current.chartInstance) {\n        chartRef.current.chartInstance.destroy();\n      }\n    };\n  }, []);\n\n  if (!chart || !chart.data) return null;\n\n  const options = {\n    responsive: true,\n    maintainAspectRatio: true,\n    scales: {\n      x: {\n        type: 'category',\n        display: true,\n      },\n      y: {\n        type: 'linear',\n        display: true,\n      }\n    },\n    plugins: {\n      legend: {\n        position: 'top',\n        labels: { font: { family: 'Inter' } }\n      }\n    },\n    animation: {\n      duration: 1000,\n      easing: 'easeInOutQuart'\n    }\n  };\n\n  return (\n    <div className={`transition-all duration-700 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-20'}`}>\n      <div className=\"bg-white/50 backdrop-blur-sm shadow-xl w-full max-w-4xl mx-auto rounded-xl\">\n        <div className=\"relative p-8\">\n          <div id={`chart-${index}`}>\n            <h2 className=\"text-2xl font-bold mb-6 text-center\">{chart.title}</h2>\n            <div className=\"w-full aspect-[16/9]\">\n              {chart.type === \"Bar\" ? (\n                <Bar \n                  ref={chartRef}\n                  data={chart.data}\n                  options={options}\n                />\n              ) : chart.type === \"Line\" ? (\n                <Line \n                  ref={chartRef}\n                  data={chart.data}\n                  options={options}\n                />\n              ) : (\n                <div>Unsupported chart type</div>\n              )}\n            </div>\n            <p className=\"mt-1 text-gray-600 text-center\">{chart.commentary}</p>\n            <div className=\"text-right mt-6\">\n              <span className=\"text-gray-400 text-sm\">Get your Groupchat Wrapped @ wrapped.chat</span>\n            </div>\n          </div>\n          <div className=\"absolute top-4 right-4 flex gap-2\">\n            <button\n              onClick={() => handleExport(`chart-${index}`, 'clipboard')}\n              className=\"p-2 rounded-full bg-white/80 hover:bg-white transition-colors shadow-sm\"\n              title=\"Copy to clipboard\"\n            >\n              <Copy className=\"w-4 h-4 text-gray-600\" />\n            </button>\n            <button\n              onClick={() => handleExport(`chart-${index}`, 'download')}\n              className=\"p-2 rounded-full bg-white/80 hover:bg-white transition-colors shadow-sm\"\n              title=\"Download as PNG\"\n            >\n              <Camera className=\"w-4 h-4 text-gray-600\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst DaySummariesGrid = ({ summaries, isVisible }) => {\n  if (!summaries || summaries.length === 0) return null;\n  \n  return (\n    <div className={`transition-all duration-700 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-20'}`}>\n      <div className=\"relative bg-white/50 backdrop-blur-sm shadow-xl w-full max-w-6xl mx-auto rounded-xl p-8\">\n        <div id=\"summaries-grid\">\n          <h2 className=\"text-2xl font-bold mb-6 text-center\">Notable Days</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {summaries.map((summary, index) => (\n              <div \n                key={index}\n                className=\"bg-white/70 backdrop-blur-sm rounded-lg shadow-md p-6\"\n              >\n                <h3 className=\"text-xl font-semibold mb-4\">{summary.title}</h3>\n                <div className=\"text-gray-700 leading-relaxed\">\n                  {typeof summary.summary === 'object' \n                    ? JSON.stringify(summary.summary, null, 2) \n                    : summary.summary}\n                </div>\n                <div className=\"text-right mt-4\">\n                  <span className=\"text-gray-400 text-sm\">Get your Groupchat Wrapped @ wrapped.chat</span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n        <div className=\"absolute top-4 right-4 flex gap-2\">\n          <button\n            onClick={() => handleExport('summaries-grid', 'clipboard')}\n            className=\"p-2 rounded-full bg-white/80 hover:bg-white transition-colors shadow-sm\"\n            title=\"Copy to clipboard\"\n          >\n            <Copy className=\"w-4 h-4 text-gray-600\" />\n          </button>\n          <button\n            onClick={() => handleExport('summaries-grid', 'download')}\n            className=\"p-2 rounded-full bg-white/80 hover:bg-white transition-colors shadow-sm\"\n            title=\"Download as PNG\"\n          >\n            <Camera className=\"w-4 h-4 text-gray-600\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Build chart datasets from analysisData\nconst buildChartDataSets = (analysisData) => {\n  if (!analysisData) return [];\n\n  const chartDataSets = [];\n\n  try {\n    // Day of Week Chart\n    if (isValidArray(analysisData.day_of_week.data)) {\n      const labels = analysisData.day_of_week.data.map(d => safeGet(d, 'day_of_week'));\n      const values = analysisData.day_of_week.data.map(d => safeGet(d, 'avg_messages', 0));\n      const { sortedLabels, sortedData } = sortBarData(labels, values);\n      \n      chartDataSets.push({\n        title: \"Average Messages by Day of Week\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'Avg Messages by Day of Week',\n            data: sortedData,\n            backgroundColor: 'rgba(54, 162, 235, 0.6)',\n          }]\n        },\n        commentary: analysisData.day_of_week.caption\n      });\n    }\n\n    // Monthly Messages Chart\n    if (isValidArray(analysisData.monthly_messages.data)) {\n      chartDataSets.push({\n        title: \"Monthly Message Count\",\n        type: \"Line\",\n        data: {\n          labels: analysisData.monthly_messages.data.map(d => safeGet(d, 'date')),\n          datasets: [{\n            label: 'Messages per Month',\n            data: analysisData.monthly_messages.data.map(d => safeGet(d, 'message_count', 0)),\n            borderColor: 'rgba(255, 99, 132, 1)',\n            fill: false\n          }]\n        },\n        commentary: analysisData.monthly_messages.caption\n      });\n    }\n\n    // Average Messages Sent Chart\n    if (isValidArray(analysisData.avg_messages_sent.data)) {\n      chartDataSets.push({\n        title: \"Average Messages Sent per Month\",\n        type: \"Line\",\n        data: {\n          labels: analysisData.avg_messages_sent.data.map(d => safeGet(d, 'month')),\n          datasets: [{\n            label: 'Avg Messages per Month',\n            data: analysisData.avg_messages_sent.data.map(d => safeGet(d, 'avg_messages_sent', 0)),\n            borderColor: 'rgba(75, 192, 192, 1)',\n            fill: false\n          }]\n        },\n        commentary: analysisData.avg_messages_sent.caption\n      });\n    }\n\n    // Quarterly Contribution Chart\n    if (isValidArray(analysisData.quarterly_contribution.data)) {\n      const quarterData = groupBySender(analysisData.quarterly_contribution.data, 'date', 'message_count');\n      if (quarterData.dates.length > 0 && quarterData.datasets.length > 0) {\n        chartDataSets.push({\n          title: \"Quarterly Message Contribution by Sender\",\n          type: \"Line\",\n          data: {\n            labels: quarterData.dates,\n            datasets: quarterData.datasets\n          },\n          commentary: analysisData.quarterly_contribution.caption\n        });\n      }\n    }\n\n    // Yearly Comparison Chart\n    if (isValidArray(analysisData.yearly_comparison.data)) {\n      const labels = analysisData.yearly_comparison.data.map(d => safeGet(d, 'sender'));\n      const values = analysisData.yearly_comparison.data.map(d => safeGet(d, 'percent_change', 0));\n      const { sortedLabels, sortedData } = sortBarData(labels, values);\n      \n      chartDataSets.push({\n        title: \"Year-Over-Year Message Change\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'YoY % Change',\n            data: sortedData,\n            backgroundColor: 'rgba(153, 102, 255, 0.6)'\n          }]\n        },\n        commentary: analysisData.yearly_comparison.caption\n      });\n    }\n\n    // Top Ten Days Chart\n    if (isValidArray(analysisData.top_ten_days.data)) {\n      const labels = analysisData.top_ten_days.data.map(d => safeGet(d, 'day'));\n      const values = analysisData.top_ten_days.data.map(d => safeGet(d, 'chats', 0));\n      const { sortedLabels, sortedData } = sortBarData(labels, values);\n      \n      chartDataSets.push({\n        title: \"Top 10 Most Active Days\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'Number of Messages',\n            data: sortedData,\n            backgroundColor: 'rgba(255, 206, 86, 0.6)'\n          }]\n        },\n        commentary: analysisData.top_ten_days.caption\n      });\n\n    }\n\n   \n  // Top 3 days summaries\n\n    if (analysisData.top_ten_days?.day_summaries && \n      Array.isArray(analysisData.top_ten_days.day_summaries)) {\n    const summaries = analysisData.top_ten_days.day_summaries.map(dayData => ({\n      title: String(dayData.date || ''),\n      summary: String(dayData.content.summary || '')\n    })).filter(summary => summary.title && summary.summary); // Filter out any empty summaries\n    \n    if (summaries.length > 0) {\n      chartDataSets.push({\n        type: \"SummaryGrid\",\n        summaries: summaries\n      });\n    }\n  }\n\n\n    // Manic Data Chart\n    if (isValidArray(analysisData.manic.data)) {\n      const labels = analysisData.manic.data.map(d => safeGet(d, 'sender'));\n      const values = analysisData.manic.data.map(d => safeGet(d, 'percent_manic', 0));\n      const { sortedLabels, sortedData } = sortBarData(labels, values);\n      \n      chartDataSets.push({\n        title: \"Most Manic Award\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: '% Messages (10pm-4am)',\n            data: sortedData,\n            backgroundColor: 'rgba(54, 162, 235, 0.6)'\n          }]\n        },\n        commentary: analysisData.manic.caption\n      });\n    }\n\n    // Most Ignored Chart\n    if (isValidArray(analysisData.most_ignored.data)) {\n      const labels = analysisData.most_ignored.data.map(d => safeGet(d, 'sender'));\n      const values = analysisData.most_ignored.data.map(d => safeGet(d, 'average_time_to_respond', 0));\n      const { sortedLabels, sortedData } = sortBarData(labels, values);\n      \n      chartDataSets.push({\n        title: \"Most Ignored Member :(\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'Average Minutes Until Response',\n            data: sortedData,\n            backgroundColor: 'rgba(54, 162, 235, 0.6)'\n          }]\n        },\n        commentary: analysisData.most_ignored.caption\n      });\n    }\n\n    // Novelist Award\n    if (isValidArray(analysisData.novelist.data)) {\n      const labels = analysisData.novelist.data.map(d => safeGet(d, 'sender'));\n      const values = analysisData.novelist.data.map(d => safeGet(d, 'average_message_length', 0));\n      const { sortedLabels, sortedData } = sortBarData(labels, values);\n      \n      chartDataSets.push({\n        title: \"Groupchat Novelist Award\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'Average Characters per Message',\n            data: sortedData,\n            backgroundColor: 'rgba(54, 162, 235, 0.6)'\n          }]\n        },\n        commentary: analysisData.novelist.caption\n      });\n    }\n\n\n    // Swear Data Chart\n    if (isValidArray(analysisData.swears.data)) {\n      const labels = analysisData.swears.data.map(d => safeGet(d, 'sender'));\n      const values = analysisData.swears.data.map(d => safeGet(d, 'swears_per_message', 0));\n      const { sortedLabels, sortedData } = sortBarData(labels, values);\n      \n      chartDataSets.push({\n        title: \"Swear Word Frequency\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'Swears per Message',\n            data: sortedData,\n            backgroundColor: 'rgba(255, 99, 132, 0.6)'\n          }]\n        },\n        commentary: analysisData.swears.caption\n      });\n    }\n\n    // Hangout Data Chart\n    if (isValidArray(analysisData.hangout.data)) {\n      const labels = analysisData.hangout.data.map(d => safeGet(d, 'sender'));\n      const values = analysisData.hangout.data.map(d => safeGet(d, 'hangouts_per_message', 0));\n      const { sortedLabels, sortedData } = sortBarData(labels, values);\n      \n      chartDataSets.push({\n        title: \"Hangout Discussion Frequency\",\n        type: \"Bar\",\n        data: {\n          labels: sortedLabels,\n          datasets: [{\n            label: 'Hangout References per Message',\n            data: sortedData,\n            backgroundColor: 'rgba(75, 192, 192, 0.6)'\n          }]\n        },\n        commentary: analysisData.hangout.caption\n      });\n    }\n\n  chartDataSets.push({\n    type: \"TextSummaryCard\",\n    title: \"That's all folks!\",\n    summary: \"We wish you and your groupchat the happiest of New Years! We like to have fun around here but all jokes aside, everyone in the groupchat is special, whether it's the guy who always posts videos you're not going to watch, or the old college bud with three kids that hasn't posted since the last one was born (cute pics though.) Shoot 'em a message and let em know you care. Share this Wrapped. Help us keep the lights on <3\"\n  });\n    \n\n  } catch (error) {\n    console.error('Error building chart datasets:', error);\n  }\n\n  return chartDataSets;\n};\n\n\n\n\nconst App = () => {\n  const [phase, setPhase] = useState('upload');\n  const [connectionMethod, setConnectionMethod] = useState(null);\n  const [analysisData, setAnalysisData] = useState(null);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [currentChartIndex, setCurrentChartIndex] = useState(0);\n  const [isScrolling, setIsScrolling] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleFileChange = (e) => {\n    if (e.target.files && e.target.files[0]) {\n      console.log('File selected:', e.target.files[0].name);\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n\n  const handleFileUpload = async () => {\n    if (!selectedFile) {\n      console.warn('No file selected when attempting upload.');\n      return;\n    }\n    \n    console.log('Starting file upload and analysis...');\n    setPhase('loading');\n    const reader = new FileReader();\n\n    reader.onload = async (ev) => {\n      try {\n        console.log('File read successful, sending to /analyze');\n        const response = await fetch(`${analysisApiUrl}/analyze`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ transcript: ev.target.result })\n        });\n        \n        if (!response.ok) throw new Error('Analysis fetch not ok');\n\n        const json = await response.json();\n        console.log('Analysis data received:', json);\n        setAnalysisData(json);\n        setPhase('visualize');\n        setCurrentChartIndex(0);\n      } catch (error) {\n        console.error('Error processing file:', error);\n        setError('Analysis failed');\n        setPhase('upload');\n      }\n    };\n\n    reader.onerror = () => {\n      console.error('Error reading file');\n      setError('Failed to read file');\n      setPhase('upload');\n    };\n\n    reader.readAsText(selectedFile);\n  };\n\n  const handleWhatsAppChat = async (sessionId, chatId) => {\n    console.log('Analyzing WhatsApp chat:', { sessionId, chatId });\n    setPhase('loading');\n\n    try {\n      const response = await fetch('http://localhost:3001/analyze-whatsapp-chat', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ sessionId, chatId })\n      });\n\n      if (!response.ok) throw new Error('WhatsApp analysis fetch not ok');\n      \n      const json = await response.json();\n      console.log('WhatsApp analysis data received:', json);\n      setAnalysisData(json);\n      setPhase('visualize');\n      setCurrentChartIndex(0);\n    } catch (error) {\n      console.error('WhatsApp analysis error:', error);\n      setError('Analysis failed');\n      setPhase('upload');\n    }\n  };\n\n  const handleScroll = (e) => {\n    if (isScrolling || !analysisData) return;\n\n    const chartDataSets = buildChartDataSets(analysisData);\n    if (!chartDataSets.length) return;\n\n    setIsScrolling(true);\n    \n    if (e.deltaY > 0 && currentChartIndex < chartDataSets.length - 1) {\n      setCurrentChartIndex(prev => prev + 1);\n    } else if (e.deltaY < 0 && currentChartIndex > 0) {\n      setCurrentChartIndex(prev => prev - 1);\n    }\n\n    setTimeout(() => setIsScrolling(false), 700);\n  };\n\n  // Phase-based rendering:\n  if (phase === 'upload') {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4\">\n        <div className=\"w-full max-w-xl p-8 bg-white/70 backdrop-blur-sm rounded-xl shadow-lg\">\n          {error && (\n            <div className=\"mb-6 p-1 bg-red-50 text-red-700 rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          <h1 className=\"text-3xl font-bold text-center mb-8\">Groupchat Wrapped 2024</h1>\n          <img src = \"/giftbox_opening.gif\"></img>\n          {!connectionMethod ? (\n            <div className=\"space-y-0\">\n              <p className=\"text-gray-600 mb-8 p-1\" align = \"center\">It's been quite a year huh? Let's review! To get started, click the button below import your groupchat data. Don't worry - we won't save anything beyond this session.</p>\n              <button\n                onClick={() => setConnectionMethod('file')}\n                className=\"w-full p-6 text-left border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 transition-colors\"\n              >\n                <h2 className=\"text-xl font-semibold mb-2\">Upload Chat File</h2>\n                <p className=\"text-gray-600\">Export your chat from WhatsApp and upload the file</p>\n              </button>\n              </div>)\n          : (\n            <div>\n              <button\n                onClick={() => {\n                  setConnectionMethod(null);\n                  setError(null);\n                }}\n                className=\"mb-6 text-gray-600 hover:text-gray-800\"\n              >\n                ← Back to options\n              </button>\n\n              {connectionMethod === 'file' ? (\n                <div className=\"space-y-4\">\n                  <p className=\"text-gray-600\" align = \"center\"><a href=\"https://faq.whatsapp.com/1180414079177245/?cms_platform=iphone&helpref=platform_switcher&locale=en_US\" target = \"_blank\">To learn how to export your chat history from WhatsApp, click here.</a> You don't need to attach media.</p>\n                  <label className=\"block w-full px-4 py-8 border-2 border-dashed border-gray-300 rounded-lg text-center cursor-pointer hover:border-blue-500 transition-colors\">\n                    <input\n                      type=\"file\"\n                      accept=\".txt\"\n                      onChange={handleFileChange}\n                      className=\"hidden\"\n                    />\n                    <span className=\"text-gray-600\">\n                      {selectedFile ? selectedFile.name : \"Drop your WhatsApp chat file here or click to browse\"}\n                    </span>\n                  </label>\n                  \n                  {selectedFile && (\n                    <button\n                      onClick={handleFileUpload}\n                      className=\"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                    >\n                      Analyze Chat\n                    </button>\n                  )}\n                </div>\n              ) : (\n                <WhatsAppConnector onChatSelected={handleWhatsAppChat} />\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  if (phase === 'loading') {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex flex-col items-center justify-center\">\n        <div className=\"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mb-4\" />\n        <h2 className=\"text-xl font-medium text-gray-700\">Analyzing your chat...</h2>\n      </div>\n    );\n  }\n\n  if (phase === 'error') {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4\">\n        <div className=\"bg-red-50 border-l-4 border-red-400 p-4 max-w-md\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0\">\n            <svg className=\"h-5 w-5 text-red-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm-1.293-5.293a1 \n              1 0 011.414 0L10 13.586l1.293-1.293a1 1 0 011.414 1.414L11.414 \n              15l1.293 1.293a1 1 0 01-1.414 1.414L10 16.414l-1.293 \n              1.293a1 1 0 01-1.414-1.414L8.586 15l-1.293-1.293a1 1 0 \n              010-1.414z\" clipRule=\"evenodd\" />\n              </svg>\n            </div>\n            <div className=\"ml-3\">\n              <p className=\"text-sm text-red-700\">\n                There was an error analyzing your chat. Please try again.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (phase === 'visualize') {\n    const chartDataSets = buildChartDataSets(analysisData);\n    if (!chartDataSets || chartDataSets.length === 0) {\n      return (\n        <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4\">\n          <div className=\"bg-yellow-50 border-l-4 border-yellow-400 p-4 max-w-md\">\n            <div className=\"flex\">\n              <div className=\"flex-shrink-0\">\n                <svg className=\"h-5 w-5 text-yellow-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                  <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <div className=\"ml-3\">\n                <p className=\"text-sm text-yellow-700\">\n                  No data available for visualization\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n   \n    const safeCurrentIndex = Math.max(0, Math.min(currentChartIndex, chartDataSets.length - 1));\n    const currentItem = chartDataSets[safeCurrentIndex];\n    const showScrollIndicator = safeCurrentIndex < chartDataSets.length - 1;\n   \n    return (\n      <div \n        className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-8\"\n        onWheel={handleScroll}\n      >\n        {/* Position indicator */}\n        <div className=\"fixed top-4 right-4 bg-white/80 backdrop-blur-sm rounded-full px-4 py-2 text-sm text-gray-600\">\n          {safeCurrentIndex + 1} of {chartDataSets.length}\n        </div>\n   \n        {/* Content */}\n        <div className=\"w-full\">\n          {currentItem && (\n            currentItem.type === \"SummaryGrid\" ? (\n              <DaySummariesGrid \n                summaries={currentItem.summaries}\n                isVisible={true}\n              />\n            ) : currentItem.data ? (\n              <AnimatedChart \n                chart={currentItem}\n                isVisible={true}\n                index={safeCurrentIndex}\n              />\n            ) : currentItem.type === \"TextSummaryCard\" ? (\n              <TextSummaryCard\n                title = {currentItem.title}\n                summary={currentItem.summary}\n                isVisible={true}\n                />\n\n            ) : null\n          )}\n        </div>\n   \n        {/* Scroll indicator */}\n        {showScrollIndicator && (\n          <div className=\"fixed right-12 top-1/2 -translate-y-1/2 flex flex-col items-center animate-fade-in\">\n            <div className=\"animate-bounce flex flex-col items-center\">\n              <svg \n                width=\"24\" \n                height=\"24\" \n                viewBox=\"0 0 24 24\" \n                fill=\"none\" \n                stroke=\"currentColor\" \n                strokeWidth=\"2\" \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\" \n                className=\"text-blue-500\"\n              >\n                <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\n                <polyline points=\"19 12 12 19 5 12\"></polyline>\n              </svg>\n              <p className=\"text-sm font-medium text-gray-500 mt-2\">Scroll Down</p>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n   }\n\n  // If none of the phases matched, show an error\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4 bg-red-50 text-red-700\">\n      <p>Unexpected state. Please reload the page.</p>\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}